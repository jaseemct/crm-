<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        .navbar {
            z-index: 9999;
            background-color: black;
        }

        .dropdown-menu {
            top: 100%;
            border: none;
        }

        .navbar-vertical {
            height: 100vh;
            position: fixed;
            top: 20px;
            left: 0;
            width: 250px;
            z-index: 1;
            overflow-y: auto;
            background-color: black;
            border-right: 1px solid #111213;
            transition: left 0.3s ease;
            padding-top: 60px;
        }

        @media (max-width: 768px) {
            .navbar-vertical {
                left: -250px;
            }

        }

        .navbar-vertical.open {
            left: 0;
            margin-top: 100px;
        }


        .navbar-vertical .nav-item {
            background-color: black;
            width: 100%;
            margin-bottom: 10px;
            margin-left: -20px;
        }

        .navbar-vertical .nav-item a {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            color: white;
            transition: background-color 0.3s;
            border: 1px solid #dee2e6;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        .navbar-vertical .nav-item a:hover {
            background-color: antiquewhite;
            color: black;
        }

        .navbar-vertical .nav-item a i {
            margin-right: 10px;
        }

        .navbar-brand {
            cursor: pointer;
        }

        .navbar-brand:hover {
            text-decoration: none;
        }

        li {
            list-style-type: none;
        }

        .footer {
            left: 0;
            bottom: 0;
            width: 100%;
            height: 2.5rem;
            background-color: black;
            color: white;
            text-align: center;
            padding: 10px 0;
        }

        .con {
            position: relative;
            min-height: 100vh;
        }

        .con1 {
            padding-bottom: 2.5rem;
        }

        body {
            background-color: white;
            font-family: Arial, sans-serif;
        }

        .card {
            height: 200px;
            background-color: #f2f2f2;
        }


        .popup-content {
            text-align: center;



        }

        .close {
            position:relative;
            top: 5px;
            right: 10px;
            cursor: pointer;
            color: #777;
            /* Changing the color of the close button */
        }

        .close:hover {
            color: #333;
            /* Changing the hover color of the close button */
        }

        .popup i {
            font-size: 48px;
            /* Changing the size of the folder icon */
            color: black;
            /* Changing the color of the folder icon */
        }



        .custom-card {
            background-color: #d4edda;
            /* Light gray background */
            border: 3px solid #afb9ed;
            /* Light gray border */
            border-radius: 10px;
            margin-bottom: 20px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            /* Soft shadow */
            transition: transform 0.3s, box-shadow 0.3s;
            /* Smooth transition for both transform and box-shadow */
        }

        .custom-card:hover {
            transform: translateY(-5px);
            /* Lift card on hover */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            /* Increase shadow on hover */
        }



        .custom-card .card-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: rgb(8, 165, 160);
        }

        .custom-card .card-text {

            font-size: 16px;
            line-height: 1.5;
            margin-bottom: 15px;
            text-align: justify;
            /* Align text to the right */
        }

        @media (max-width: 768px) {
            .opp {
                margin-top: 130px;
            }
        }


        .chart-container {
            margin-top: 100px;
            text-align: center;
        }

        .chart-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: #333;
        }

        .chart {
            display: inline-block;
            margin-right: 20px;
        }

        .bar {
            width: 200px;
            background-color: rgb(8, 165, 160);
            border-radius: 5px;
            margin-bottom: 5px;
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .bar {
                width: 50px;

            }

        }

        .bar-label {
            margin-top: 5px;
            color: #666;
        }

        .bar-value {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #ffcc00;
            height: 0;
            transition: height 0.5s ease;
            border-radius: 5px;
        }

        .chart:hover .bar-value {
            height: 100%;
        }

        .connn {
            padding-left: 250px;
        }

        @media (max-width: 768px) {
            .connn {
                padding-left: 0;
            }
        }

        .wrapperr {
            width: 90%;
            height: auto;
            margin: auto;
            background-color: white;
        }

        h5 {
            color: #1C4E80;
        }

        .card {
            transition: transform 0.3s ease-in-out;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .icon-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 70px;
            height: 70px;
            background-color: rgb(8, 165, 160);
            border-radius: 50%;
            margin: 0 auto 20px;
        }

        .icon-container i {
            color: #fff;
            font-size: 30px;
        }

        .card-title {
            color: black;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .card-text {
            color: #555;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .btn-secondary {
            background-color: black;
            border-color: #1C4E80;
        }

        .btn-secondary:hover {
            background-color: #154167;
            border-color: #154167;
            color: #fff;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-dark  fixed-top">
        <a class="navbar-brand" href="#" onclick="toggleNavbar()"> <i class="fa-brands fa-ubuntu"
                style="font-size: 40px; color:white"></i>CRM</a>
    </nav>
    <div class="wrapperr">
        <nav class="navbar-vertical" id="navbarVertical">
            <ul class="flex-column">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'home' %}"><i class="fas fa-home"></i> Home</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="{% url 'dash' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'archive' %}"><i class="fas fa-tachometer-alt"></i> Archives</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href=""><i class="fas fa-money-bill-wave"></i> Finance</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href=""><i class="fas fa-chart-line"></i> Sales</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href=""><i class="fas fa-users"></i> Human Resource</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href=""><i class="fas fa-globe"></i> Websites</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href=""><i class="fas fa-cogs"></i> Services</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href=""><i class="fas fa-check-circle"></i> Productivity</a>
                </li>
            </ul>
        </nav>
        <div class="connn">
            <div style=" margin-bottom: 80px; margin-top: 120px;" class="container">


                <h2 style="margin-top: 50px; color: black;" class="text-center">Customer's Messages</h2>

                <div class="row mt-4">
                    <div class="col-md-3">
                        <div class="custom-card" draggable="true"  ondragstart="drag(event,'Jaseem')"  id="dragData1" data="Jaseem">


                            <div class="card-body">
                                <h5 class="card-title">Jaseem</h5>
                                <p class="card-text">"Wishing you a joyous holiday season from all of us at [Company
                                    Name]! Thank you for being a valued part of our community. We look forward to
                                    serving you in the coming year."</p>
                            </div>
                        </div>
                        <div class="popup" id="popup_Jaseem" name="popup">
                            <div class="popup-content">
                                <span class="close" onclick="closePopup()"></span>
                                <i class="fa-solid fa-box-archive" style="color: #143bff;"></i><br>
                                add to archive
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="custom-card" draggable="true"  ondragstart="drag(event,'Amal')" id="dragData2" data="Amal">

                            <div class="card-body">
                                <h5 class="card-title">Amal</h5>
                                <p class="card-text">"Hi, we're constantly striving to improve our services, and your
                                    feedback is invaluable to us. Could you take a moment to share your thoughts on your
                                    recent experience with our team?"</p>
                            </div>
                        </div>
                        <div class="popup" id="popup_Amal">
                            <div class="popup-content">
                                <span class="close" onclick="closePopup()"></span>
                                <i class="fa-solid fa-box-archive" style="color: #143bff;"></i><br>
                                add to archive
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="custom-card" draggable="true" ondragstart="drag(event,'Arya')" id="dragData3" data="Arya">

                            <div class="card-body">
                                <h5 class="card-title">Arya</h5>
                                <p class="card-text">"Hi, we're constantly striving to improve our services, and your
                                    feedback is invaluable to us. Could you take a moment to share your thoughts on your
                                    recent experience with our team?"</p>
                            </div>
                        </div>
                        <div class="popup" id="popup_Arya">
                            <div class="popup-content">
                                <span class="close" onclick="closePopup()"></span>
                                <i class="fa-solid fa-box-archive" style="color: #143bff;"></i><br>
                                add to archive
                            </div>
                        </div>
                    </div>



                    <div class="col-md-3">
                        <div class="custom-card" draggable="true"  ondragstart="drag(event,'Anu')" id="dragData4" data="Anu">

                            <div class="card-body">
                                <h5 class="card-title">Anu</h5>
                                <p class="card-text">"Hi, we're constantly striving to improve our services, and your
                                    feedback is invaluable to us. Could you take a moment to share your thoughts on your
                                    recent experience with our team?"</p>
                            </div>
                        </div>
                        <div class="popup" id="popup_Anu">
                            <div class="popup-content">
                                <span class="close" onclick="closePopup()"></span>
                                <i class="fa-solid fa-box-archive" style="color: #143bff;"></i><br>
                                add to archive
                            </div>
                        </div>
                    </div>
                </div>





                <div class="container-fluid my-4">
                    <img src="https://www.mercuriusit.com/wp-content/uploads/Combo-Chart.gif" alt="" class="img-fluid">
                </div>
                <div class="container-fluid my-4">
                    <img src="https://cdn.dribbble.com/users/1623326/screenshots/3346162/chart_graph.gif" alt=""
                        class="img-fluid w-100">
                </div>

                <div style="margin-bottom: 80px;" class="row my-5 py-5">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="icon-container">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <h5 class="card-title">Total Sales</h5>
                                <p class="card-text">View the total number of sales made and track progress</p>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="icon-container">
                                    <i class="fas fa-users"></i>
                                </div>
                                <h5 class="card-title">New Customers</h5>
                                <p class="card-text">See how many new customers have joined recently.</p>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="icon-container">
                                    <i class="fas fa-tasks"></i>
                                </div>
                                <h5 class="card-title">Pending Tasks</h5>
                                <p class="card-text">Check out the tasks that are pending completion.</p>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="container-fluid my-5">
                    <img src="https://i.pinimg.com/originals/fe/b8/0e/feb80eb9f59d629306668d1edce3a0e2.gif" alt=""
                        class="img-fluid w-100">
                </div>
                <div class="row mt-4">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Recent Notifications</h5>
                                <ul class="list-group">
                                    <li class="list-group-item">New contact added: John Smith</li>
                                    <li class="list-group-item">Task assigned: Follow up with client XYZ</li>
                                    <li class="list-group-item">New sale recorded: $1000</li>
                                    <li class="list-group-item">Meeting scheduled: 3:00 PM, Room 101</li>
                                </ul>
                            </div>
                        </div>
                    </div>


                    <div class="col-md-4">
                        <div class="opp">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Progress Tracking</h5>
                                    <div class="progress mb-3">
                                        <div class="progress-bar" role="progressbar"
                                            style="width: 60%; background-color: black;" aria-valuenow="60"
                                            aria-valuemin="0" aria-valuemax="100">60%</div>
                                    </div>
                                    <p class="card-text">Progress towards achieving a specific goal.</p>
                                    <a href="#" class="btn btn-secondary">View Goal</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="chart-container">
                    <h1 class="chart-title">Sales Performance</h1>
                    <div class="chart">
                        <div class="bar" style="height: 120px;">
                            <div class="bar-value">120</div>
                        </div>
                        <div class="bar-label">2020</div>
                    </div>
                    <div class="chart">
                        <div class="bar" style="height: 160px;">
                            <div class="bar-value">160</div>
                        </div>
                        <div class="bar-label">2021</div>
                    </div>
                    <div class="chart">
                        <div class="bar" style="height: 80px;">
                            <div class="bar-value">80</div>
                        </div>
                        <div class="bar-label">2022</div>
                    </div>
                    <div class="chart">
                        <div class="bar" style="height: 200px;">
                            <div class="bar-value">200</div>
                        </div>
                        <div class="bar-label">2023</div>
                    </div>
                </div>



            </div>
        </div>
    </div>
    </div>
    <script>
        // Hide the popup initially
        document.querySelectorAll('.popup').forEach(popup => popup.style.display = 'none');


        function allowDrop(event) {
            event.preventDefault();
        }
        function handleTouchStart(event, divName) {
            console.log('touch start', divName);

            // Prevent the default touch behavior
            event.preventDefault();

            // Get the card element
            var cardElement = event.target.closest('.custom-card');

            // Show popup when touching a card
            document.getElementById('popup_' + divName).style.display = 'block';

            // Position the popup above the touched card
            var popup = document.getElementById('popup_' + divName);
            var rect = cardElement.getBoundingClientRect();
            popup.style.top = (rect.top - popup.offsetHeight) + 'px';
            popup.style.left = rect.left + 'px';

            // Store the card element's ID or other necessary information
            // for further touch event handling
            event.target.touchData = {
                cardElementId: cardElement.id,
                popupId: 'popup_' + divName,
            };
        }

        function drag(event, divName) {
            var cardElement = event.target.closest('.custom-card');
            event.dataTransfer.setData("text", cardElement.id);

            // Show popup when dragging a card
            document.getElementById('popup_' + divName).style.display = 'block';

            // Position popup above the dragged card
            var popup = document.getElementById('popup_' + divName);
            console.log(popup);
            var rect = cardElement.getBoundingClientRect();
            popup.style.top = (rect.top - popup.offsetHeight) + 'px';
            popup.style.left = rect.left + 'px';
        }

        document.querySelectorAll('.popup').forEach(popup => {
            popup.addEventListener('dragover', function (event) {
                event.preventDefault();
            });
        });


        function handleDrop(event, popupId) {
            event.preventDefault();
            var fetchData = event.dataTransfer.getData("text");
            var draggedElement = document.getElementById(fetchData);

            draggedElement.parentNode.removeChild(draggedElement);

            var draggedHTML = draggedElement.outerHTML;
            var savedHTMLArray = JSON.parse(sessionStorage.getItem("draggedHTMLArray")) || [];
            savedHTMLArray.push(draggedHTML);
            sessionStorage.setItem("draggedHTMLArray", JSON.stringify(savedHTMLArray));

            // Hide popup after dropping a card
            document.getElementById(popupId).style.display = 'none';
            console.log("reload..........");
            location.reload();
        }

        document.getElementById('popup_Jaseem').addEventListener('drop', function (event) {
            handleDrop(event, 'popup_Jaseem');
        });

        document.getElementById('popup_Anu').addEventListener('drop', function (event) {
            handleDrop(event, 'popup_Anu');
        });

        document.getElementById('popup_Arya').addEventListener('drop', function (event) {
            handleDrop(event, 'popup_Arya');
        });

        document.getElementById('popup_Amal').addEventListener('drop', function (event) {
            handleDrop(event, 'popup_Amal');
        });

        document.querySelectorAll("[draggable=true]").forEach(function (element) {
            element.addEventListener("dragend", function (event) {
                event.target.parentNode.removeChild(event.target);
                // Hide popup when card is removed
                document.querySelectorAll('.popup').forEach(popup => popup.style.display = 'none');

                location.reload();

            });
        });

        var savedHTMLArray = JSON.parse(sessionStorage.getItem("draggedHTMLArray"));

        if (savedHTMLArray && savedHTMLArray.length > 0) {
            savedHTMLArray.forEach(function (cardHTML) {
                var card = document.createElement('div');
                card.innerHTML = cardHTML;
                var cardId = card.firstChild.id;
                document.getElementById(cardId).remove();
            });
        }

        var touchStartX, touchStartY, touchEndX, touchEndY;
        var draggedElement;

        function touchStart(event) {
            touchStartX = event.touches[0].clientX;
            touchStartY = event.touches[0].clientY;
            draggedElement = event.target.closest('.custom-card');
        }

        function touchMove(event) {
            event.preventDefault();
            divName=event.target.parentElement.parentElement.getAttribute('data')
            console.log(divName);
            document.getElementById('popup_' + divName).style.display = 'block';

            // Position popup above the dragged card
            var popup = document.getElementById('popup_' + divName);
            console.log(popup);
            var cardElement = event.target.closest('.custom-card');
            var rect = cardElement.getBoundingClientRect();
            popup.style.top = (rect.top - popup.offsetHeight) + 'px';
            popup.style.left = rect.left + 'px';
        }

        function touchEnd(event) {
            touchEndX = event.changedTouches[0].clientX;
            touchEndY = event.changedTouches[0].clientY;

            if (Math.abs(touchEndX - touchStartX) < 10 && Math.abs(touchEndY - touchStartY) < 10) {
                event.target.click();
            } else {
                if (draggedElement && draggedElement.parentNode) {
                    popup=draggedElement.getAttribute('data')
                    console.log(popup);
                    var popup = document.getElementById('popup_' + popup);
                    popup.style.display = 'none';
                    draggedElement.parentNode.removeChild(draggedElement);

                    var savedHTMLArray = JSON.parse(sessionStorage.getItem("draggedHTMLArray")) || [];
                    savedHTMLArray.push(draggedElement.outerHTML);
                    sessionStorage.setItem("draggedHTMLArray", JSON.stringify(savedHTMLArray));

                    draggedElement = null;
                }
            }
        }

        function renderCardsFromStorage() {
            var savedHTMLArray = JSON.parse(sessionStorage.getItem("draggedHTMLArray")) || [];
            savedHTMLArray.forEach(function (html) {
                var tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                document.body.appendChild(tempDiv.firstChild);
            });
        }

        document.querySelectorAll(".custom-card").forEach(function (element) {
            element.addEventListener("touchstart", touchStart);
            element.addEventListener("touchmove", touchMove);
            element.addEventListener("touchend", touchEnd);
        });
    </script>

    <script>
        function toggleNavbar() {
            var navbar = document.getElementById('navbarVertical');
            if (window.innerWidth <= 768) {
                navbar.classList.toggle('open');
                navbar.style.margin = '0';
            }
        }

        document.addEventListener("click", function (event) {
            var navbar = document.getElementById('navbarVertical');
            if (event.target.closest('.navbar-brand') === null && !navbar.contains(event.target)) {
                navbar.classList.remove('open');
            }
        });
    </script>




    <footer class="footer fixed-footer">
        <div class="containe">
            <span>Website made with CRM</span>
        </div>
    </footer>

</body>

</html>